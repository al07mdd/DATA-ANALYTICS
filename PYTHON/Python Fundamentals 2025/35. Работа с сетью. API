üî∏üî∏üî∏ –£–†–û–ö 35. –†–ê–ë–û–¢–ê –° –°–ï–¢–¨–Æ. API üî∏üî∏üî∏

üìå –ü–†–û–¢–û–ö–û–õ HTTP
HTTP (HyperText Transfer Protocol) ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.
URL ‚Äî –∞–¥—Ä–µ—Å —Ä–µ—Å—É—Ä—Å–∞.
DNS ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–æ–º–µ–Ω–æ–≤ –≤ IP-–∞–¥—Ä–µ—Å–∞.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTTP-–∑–∞–ø—Ä–æ—Å–∞:
üî∏–ú–µ—Ç–æ–¥: GET, POST, PUT, DELETE
üî∏URL —Ä–µ—Å—É—Ä—Å–∞
üî∏–ó–∞–≥–æ–ª–æ–≤–∫–∏ (User-Agent, Content-Type)
üî∏–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–¥–ª—è POST)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTTP-–æ—Ç–≤–µ—Ç–∞:
üî∏–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è (200, 404, 500)
üî∏–ó–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
üî∏–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–¥–∞–Ω–Ω—ã–µ)

üìå –ú–û–î–£–õ–¨ REQUESTS
–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
‚úÖ
pip install requests

üî∏–ò–º–ø–æ—Ä—Ç –∏ GET-–∑–∞–ø—Ä–æ—Å:
‚úÖ
import requests

response = requests.get("https://example.com")
print(response.status_code)   # –ö–æ–¥ –æ—Ç–≤–µ—Ç–∞
print(response.headers)       # –ó–∞–≥–æ–ª–æ–≤–∫–∏
print(response.text)          # –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞
–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:

.status_code

.headers

.text

.json() ‚Äì –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç JSON-–æ—Ç–≤–µ—Ç –≤ —Å–ª–æ–≤–∞—Ä—å

GET-–∑–∞–ø—Ä–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
‚úÖ
params = {'course': 'Python', 'lang': 'ru'}
response = requests.get('https://httpbin.org/get', params=params)
print(response.json())

üî∏ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
https://httpbin.org/get?course=Python&lang=ru

POST-–∑–∞–ø—Ä–æ—Å:
‚úÖ
data = {'name': 'example', 'job': 'tester'}
response = requests.post('https://httpbin.org/post', json=data)
print(response.json())

üìå –†–ê–ë–û–¢–ê –° API

API (Application Programming Interface) ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏.

–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API:
üî∏–ò–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API
üî∏–ù–∞–π—Ç–∏ URL (endpoint) –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
üî∏–£–∑–Ω–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (–æ–±—ã—á–Ω–æ JSON)
üî∏–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å —Å –ø–æ–º–æ—â—å—é requests
üî∏–ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ API –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º HTTP-–∑–∞–ø—Ä–æ—Å –∏ –ø–æ–ª—É—á–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON-–æ—Ç–≤–µ—Ç.

üìå –ü–†–ò–ú–ï–† API: RANDOM-DATA-API.COM

–ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
‚úÖ
response = requests.get('https://random-data-api.com/api/v2/users?size=1')
res = response.json()
for key, value in res.items():
    print(f"{key}: {value}")

–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
‚úÖ
params = {'size': 10}
response = requests.get('https://random-data-api.com/api/v2/users', params=params)
res = response.json()
for person in res:
    print(f"{person['last_name']:15} {person['first_name']:15} {person['email']}")

üìå –ü–†–ò–ú–ï–† API: WEATHERAPI.COM

–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ API-–∫–ª—é—á.

–ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã:
‚úÖ
API_KEY = "–≤–∞—à API-–∫–ª—é—á"
city = "Berlin"
params = {'key': API_KEY, 'q': city}
url = "http://api.weatherapi.com/v1/current.json"
response = requests.get(url, params=params)
data = response.json()

print(f"–ì–æ—Ä–æ–¥: {data['location']['name']}")
print(f"–í—Ä–µ–º—è: {data['location']['localtime']}")
print(f"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {data['current']['temp_c']} C")
print(f"–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫: {data['current']['feelslike_c']} C")
print(f"–í–ª–∞–∂–Ω–æ—Å—Ç—å: {data['current']['humidity']} %")
